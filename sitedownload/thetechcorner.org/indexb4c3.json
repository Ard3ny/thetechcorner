{"id":1306,"date":"2022-02-28T16:53:00","date_gmt":"2022-02-28T16:53:00","guid":{"rendered":"https:\/\/thetechcorner.org\/?p=1306"},"modified":"2022-02-25T12:03:24","modified_gmt":"2022-02-25T12:03:24","slug":"configure-firewall-settings-using-firewall-cmd-firewalld","status":"publish","type":"post","link":"https:\/\/thetechcorner.org\/?p=1306","title":{"rendered":"Configure firewall settings using firewall-cmd\/firewalld"},"content":{"rendered":"\n<p>We&#8217;ve worked with firewall a few posts back where I explained how to restrict network access using <a href=\"https:\/\/thetechcorner.org\/?p=1250\">firewall-cmd<\/a>, so this post is going to be more brief.<\/p>\n\n\n\n<p><\/p>\n\n\n\n<p>Let&#8217;s try configuration something to show you how this works in the real life.<\/p>\n\n\n\n<p>First install and enable apache server.<\/p>\n\n\n\n<figure class=\"wp-block-image size-full is-style-default\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"254\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-198.png?resize=640%2C254&#038;ssl=1\" alt=\"\" class=\"wp-image-1308\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-198.png?w=871&amp;ssl=1 871w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-198.png?resize=300%2C119&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-198.png?resize=768%2C305&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-198.png?resize=24%2C10&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-198.png?resize=36%2C14&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-198.png?resize=48%2C19&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure>\n\n\n\n<p><\/p>\n\n\n\n<p>Now check your IP address so you know IP address, type into your browser to access the apache.<\/p>\n\n\n\n<figure class=\"wp-block-image size-full is-style-default\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"96\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-199.png?resize=640%2C96&#038;ssl=1\" alt=\"\" class=\"wp-image-1309\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-199.png?w=864&amp;ssl=1 864w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-199.png?resize=300%2C45&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-199.png?resize=768%2C116&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-199.png?resize=24%2C4&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-199.png?resize=36%2C5&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-199.png?resize=48%2C7&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure>\n\n\n\n<p><\/p>\n\n\n\n<p>Mine for example is 192.168.194, but yours will almost certainly be different. When you have the IP you can type it into your actual PC browser (not the one in the VM).<\/p>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"317\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-202.png?resize=640%2C317&#038;ssl=1\" alt=\"\" class=\"wp-image-1312\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-202.png?w=727&amp;ssl=1 727w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-202.png?resize=300%2C149&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-202.png?resize=24%2C12&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-202.png?resize=36%2C18&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-202.png?resize=48%2C24&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p>And as expected it&#8217;s not working because the firewall won&#8217;t let any traffic go outside our linux VM. Mind that the apache server will still work properly, and you can see it on your VM web browser. But let&#8217;s change this.<\/p>\n\n\n\n<p><strong>List your current firewall that you are using<\/strong><\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">firewall-cmd --get-active-zone<\/pre>\n<\/div><\/div>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"61\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-203.png?resize=640%2C61&#038;ssl=1\" alt=\"\" class=\"wp-image-1313\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-203.png?w=823&amp;ssl=1 823w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-203.png?resize=300%2C29&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-203.png?resize=768%2C74&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-203.png?resize=24%2C2&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-203.png?resize=36%2C3&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-203.png?resize=48%2C5&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>Get  information about this zone<\/strong><\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">firewall-cmd --list-all --zone=home<\/pre>\n<\/div><\/div>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"246\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-204.png?resize=640%2C246&#038;ssl=1\" alt=\"\" class=\"wp-image-1314\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-204.png?w=753&amp;ssl=1 753w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-204.png?resize=300%2C116&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-204.png?resize=24%2C9&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-204.png?resize=36%2C14&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-204.png?resize=48%2C18&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><strong>Add a new service rule<\/strong><\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">firewall-cmd --add-service=http --pernament<\/pre>\n<\/div><\/div>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"52\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-205.png?resize=640%2C52&#038;ssl=1\" alt=\"\" class=\"wp-image-1315\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-205.png?w=783&amp;ssl=1 783w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-205.png?resize=300%2C25&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-205.png?resize=768%2C63&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-205.png?resize=24%2C2&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-205.png?resize=36%2C3&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-205.png?resize=48%2C4&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><strong>Reload the firewall<\/strong><\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">firewall-cmd --reload<\/pre>\n<\/div><\/div>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"51\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-206.png?resize=640%2C51&#038;ssl=1\" alt=\"\" class=\"wp-image-1316\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-206.png?w=768&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-206.png?resize=300%2C24&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-206.png?resize=24%2C2&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-206.png?resize=36%2C3&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-206.png?resize=48%2C4&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p> <\/p>\n\n\n\n<p>And try typing the IP address now.<\/p>\n\n\n\n<figure class=\"wp-block-image size-large is-style-default\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"128\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-201.png?resize=640%2C128&#038;ssl=1\" alt=\"\" class=\"wp-image-1311\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-201.png?resize=1024%2C204&amp;ssl=1 1024w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-201.png?resize=300%2C60&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-201.png?resize=768%2C153&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-201.png?resize=1536%2C305&amp;ssl=1 1536w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-201.png?resize=24%2C5&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-201.png?resize=36%2C7&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-201.png?resize=48%2C10&amp;ssl=1 48w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-201.png?w=1786&amp;ssl=1 1786w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-201.png?w=1280&amp;ssl=1 1280w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure>\n\n\n\n<p>And as you can see it&#8217;s working!!!<\/p>\n\n\n\n<p><\/p>\n\n\n\n<h2>Using a panic mode<\/h2>\n\n\n\n<p>In a firewall terms, a&nbsp; panic mode is mode that used to stop all traffic means discard all existing connection when we are a facing a serious problem in network environment.This mode will dropped all incoming and outgoing packets when we enable the panic mode.<\/p>\n\n\n\n<p>To start and stop a panic mode simple type<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">firewall-cmd --panic-on<\/pre>\n\n\n\n<pre class=\"wp-block-preformatted\">firewall-cmd --panic-off<\/pre>\n<\/div><\/div>\n\n\n\n<p><\/p>\n\n\n\n<h2>Configure a drop zone<\/h2>\n\n\n\n<p>Let&#8217;s say you want to disable traffic only from the specific source like IP address or MAC address or interface. This can also be done with firewall-cmd command.<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">firewall-cmd --zone=drop --add-source=*IP_adress\/Mask* <\/pre>\n<\/div><\/div>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"43\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-207.png?resize=640%2C43&#038;ssl=1\" alt=\"\" class=\"wp-image-1317\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-207.png?w=831&amp;ssl=1 831w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-207.png?resize=300%2C20&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-207.png?resize=768%2C52&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-207.png?resize=24%2C2&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-207.png?resize=36%2C2&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/image-207.png?resize=48%2C3&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n","protected":false},"excerpt":{"rendered":"<p>We&#8217;ve worked with firewall a few posts back where I explained how to restrict network [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":1332,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"nf_dc_page":"","om_disable_all_campaigns":false,"_mi_skip_tracking":false},"categories":[219],"tags":[453,391,469,220,470],"jetpack_featured_media_url":"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/02\/rhsa-Manage-security.png?fit=1280%2C720&ssl=1","_links":{"self":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/1306"}],"collection":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=1306"}],"version-history":[{"count":2,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/1306\/revisions"}],"predecessor-version":[{"id":1333,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/1306\/revisions\/1333"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/media\/1332"}],"wp:attachment":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=1306"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=1306"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=1306"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}