{"id":1494,"date":"2022-11-27T11:59:21","date_gmt":"2022-11-27T11:59:21","guid":{"rendered":"https:\/\/thetechcorner.org\/?p=1494"},"modified":"2022-11-29T19:06:50","modified_gmt":"2022-11-29T19:06:50","slug":"spf-dkim-and-dmarc-explained","status":"publish","type":"post","link":"https:\/\/thetechcorner.org\/?p=1494","title":{"rendered":"SPF, DKIM and DMARC explained"},"content":{"rendered":"\n<p><\/p>\n\n\n\n<h3>What even is SPF, DKIM and DMARC?<\/h3>\n\n\n\n<p>SPF, DKIM and DMARC are simply a set of email authentication protocols, that prove to ISPs and mail services that senders are truly authorized to send email from a particular domain. These tools provide proof that an email message is genuine and that it\u2019s coming from who it claims to be from.<\/p>\n\n\n\n<p><\/p>\n\n\n\n<h3>SPF<\/h3>\n\n\n\n<p><strong>SPF (Sender Policy Framework)&nbsp;<\/strong>is a DNS record containing information about&nbsp;<strong>servers allowed to send emails<\/strong>&nbsp;from a specific domain (for example,&nbsp;thetechcorner.org). To do that, the domain owner can add a file or record on the server which tells the receiving server what domains are actually allowed to send emails.<\/p>\n\n\n\n<p>SPF is both useful for protecting against MailFrom spoofing of your domain towards your users, but also to external destinations where it could harm your brand. Ie, Microsoft&#8217;s SPF record stops MailFrom spoofing from @microsoft.com not just to @microsoft.com but also to you which helps stop some fake Microsoft phishing emails.<\/p>\n\n\n\n<p><strong>How does it look like<\/strong><\/p>\n\n\n\n<div class=\"is-layout-constrained wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-code\"><code>v=spf1 include:5123454.thetechcorner.org ~all<\/code><\/pre>\n<\/div><\/div>\n\n\n<div class=\"wp-block-image\">\n<figure class=\"aligncenter size-large is-resized\"><img decoding=\"async\" loading=\"lazy\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-1.png?resize=640%2C360&#038;ssl=1\" alt=\"\" class=\"wp-image-1496\" width=\"640\" height=\"360\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-1.png?resize=1024%2C576&amp;ssl=1 1024w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-1.png?resize=300%2C169&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-1.png?resize=768%2C432&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-1.png?resize=1536%2C864&amp;ssl=1 1536w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-1.png?resize=2048%2C1152&amp;ssl=1 2048w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-1.png?resize=24%2C14&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-1.png?resize=36%2C20&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-1.png?resize=48%2C27&amp;ssl=1 48w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-1.png?w=1280&amp;ssl=1 1280w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-1.png?w=1920&amp;ssl=1 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n<p><\/p>\n\n\n\n<h3>DKIM<\/h3>\n\n\n\n<p>DKIM or (<strong>DomainKeys Identified Mail<\/strong>) is an authentication similar to SPF. DKIM is a key-pair signing mechanism for the header of mail messages. . When you send mail you attach a signature to the message using a private key which is compared to a public key published in DNS for your domain. DKIM adds authenticity to a message and guards against tampering with the header by down-stream mail servers. One of the benefits to working on the header is it survives SMTP relaying and auto-forwarding.<\/p>\n\n\n\n<p>DKIM is added as a TXT record by adding it into your domain panel. <\/p>\n\n\n\n<p><strong>DKIM does not directly prevent abusive \/ malicious behavior.<\/strong>&nbsp;DKIM is just a signature&#8230; If I hand you a letter with my signature on it there&#8217;s added authenticity; However, if I hand you a letter without my signature if there&#8217;s no requirement for the letter to be signed there&#8217;s no reason to be suspicious. It&#8217;s like SSL, just because a website doesn&#8217;t have SSL doesn&#8217;t mean it&#8217;s fake, but it&#8217;s preferred when SSL is used.<\/p>\n\n\n\n<p><strong>How does it look like<\/strong><\/p>\n\n\n\n<div class=\"is-layout-constrained wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-code\"><code>k=rsa; p=MIGfMA0GCksjlkdixcieJDDSFIELDSKfdsfsdfsdfsfksflsfldfsfjhsdfsdfhuisdhfuiehfhNyyHs77EoDFDDEEFFEKJKLJHLKifLN51IIvwIDAQABQp6nIyi5oioyZh+1jDXoCDDFDSFEEDSFSEFE85N7b76aTtHmy2wTgR2LFS<\/code><\/pre>\n<\/div><\/div>\n\n\n<div class=\"wp-block-image\">\n<figure class=\"aligncenter size-large is-resized\"><img decoding=\"async\" loading=\"lazy\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-2.png?resize=640%2C359&#038;ssl=1\" alt=\"\" class=\"wp-image-1497\" width=\"640\" height=\"359\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-2.png?resize=1024%2C576&amp;ssl=1 1024w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-2.png?resize=300%2C169&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-2.png?resize=768%2C432&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-2.png?resize=1536%2C864&amp;ssl=1 1536w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-2.png?resize=2048%2C1152&amp;ssl=1 2048w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-2.png?resize=24%2C14&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-2.png?resize=36%2C20&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-2.png?resize=48%2C27&amp;ssl=1 48w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-2.png?w=1280&amp;ssl=1 1280w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-2.png?w=1920&amp;ssl=1 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n<p><\/p>\n\n\n\n<h3>DMARC<\/h3>\n\n\n\n<p><strong>DMARC (Domain-based Message Authentication, Reporting &amp; Conformance)&nbsp;<\/strong>defines how the recipient\u2019s mail server should process incoming emails if they don\u2019t pass the authentication check (either SPF, DKIM, or both).<\/p>\n\n\n\n<p>If the message fails authentication, it\u2019s processed according to the selected DMARC policy:&nbsp;<strong>none, reject,&nbsp;<\/strong>or&nbsp;<strong>quarantine.<\/strong><\/p>\n\n\n\n<ul>\n<li>Under the&nbsp;<strong>\u201cnone\u201d<\/strong>&nbsp;policy, the receiving server doesn\u2019t take any action if your emails fail authentication. It doesn\u2019t impact your deliverability. But it also doesn\u2019t protect you from scammers, so we don\u2019t recommend setting it. Only by introducing stricter policies can you block them in the very beginning and let the world know you care about your customers and brand.&nbsp;<\/li>\n\n\n\n<li>Here, messages that come from your domain but don\u2019t pass the DMARC check go to&nbsp;<strong>\u201cquarantine.\u201d<\/strong>&nbsp;In such a case, the provider is advised to send your email to the spam folder.&nbsp;<\/li>\n\n\n\n<li>Under the&nbsp;<strong>\u201creject\u201d&nbsp;<\/strong>policy, the receiving server rejects all messages that don\u2019t pass email authentication. This means such emails won\u2019t reach an addressee and will result in a bounce.<\/li>\n<\/ul>\n\n\n\n<p><\/p>\n\n\n\n<p>The R in DMARC is for the Reporting component of the protocol. These reports allow the domain owner to see where all email using their domain in the From address is being sent from.<\/p>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>The DMARC record of the domain in the header from address is used if it exists.<\/strong>&nbsp;Like the above records, it exists as a TXT record in DNS.<\/p>\n\n\n\n<p>DMARC&#8217;s conformance check is called &#8220;alignment&#8221; and it checks that the header from is &#8220;aligned&#8221; with other authenticated domains on the message, either via DKIM or SPF. If&nbsp;<strong>either<\/strong>&nbsp;DKIM or SPF alignment passes, DMARC evaluates as a &#8220;PASS.&#8221;<\/p>\n\n\n\n<p><strong>SPF Alignment:<\/strong>&nbsp;The domain in the header from and envelope from must be the same (or sub-domains of the same parent domain if &#8220;relaxed&#8221;) and must pass SPF.<\/p>\n\n\n\n<p><strong>DKIM Alignment:<\/strong>&nbsp;DMARC requires a valid signature where the domain specified in the&nbsp;<code>d=<\/code>&nbsp;tag aligns with the sender&#8217;s domain from the header from field.<\/p>\n\n\n\n<p><strong>How does it look like<\/strong><\/p>\n\n\n\n<div class=\"is-layout-constrained wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-code\"><code>&nbsp;_dmarc.thetechcorner.org. IN TXT \"v=DMARC1\\; p=none\\; rua=mailto:dmarc-aggregate@thetechcorner.org\\; ruf=mailto:dmarc-afrf@thetechcorner.org\\; pct=100\"<\/code><\/pre>\n<\/div><\/div>\n\n\n<div class=\"wp-block-image\">\n<figure class=\"aligncenter size-large is-resized\"><img decoding=\"async\" loading=\"lazy\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-3.png?resize=640%2C358&#038;ssl=1\" alt=\"\" class=\"wp-image-1498\" width=\"640\" height=\"358\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-3.png?resize=1024%2C574&amp;ssl=1 1024w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-3.png?resize=300%2C168&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-3.png?resize=2048%2C1149&amp;ssl=1 2048w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-3.png?resize=24%2C13&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-3.png?resize=36%2C20&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-3.png?resize=48%2C27&amp;ssl=1 48w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-3.png?w=1280&amp;ssl=1 1280w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/image-3.png?w=1920&amp;ssl=1 1920w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n<p><\/p>\n\n\n\n<h3>TLDR:<\/h3>\n\n\n\n<ul>\n<li>Envelope from spoofing: SPF<\/li>\n\n\n\n<li>Header from spoofing: SPF + DMARC, DKIM + DMARC, or SPF + DKIM + DMARC. No one mechanism alone will be sufficient.<\/li>\n\n\n\n<li>Display name spoofing: Advanced threat filters, transport rules, and user training. None of the mechanisms care about the display name.<\/li>\n\n\n\n<li>Compromised mailboxes or &#8220;legitimate&#8221; senders: Advanced threat filters, transport rules, and user training.<\/li>\n<\/ul>\n\n\n\n<p><\/p>\n\n\n\n<h3>Useful tools:<\/h3>\n\n\n\n<p><a href=\"https:\/\/mxtoolbox.com\/\">https:\/\/mxtoolbox.com\/<\/a>                                             &#8230;. Multiple mail tools like SPF lookup, blacklist DMARC&#8230;.<\/p>\n\n\n\n<p><a href=\"https:\/\/www.learndmarc.com\/#\">https:\/\/www.learndmarc.com\/#<\/a>                            &#8230; SPF, DKIM DMARC training tool<\/p>\n\n\n\n<p><a href=\"https:\/\/kitterman.com\/spf\/validate.html\">https:\/\/kitterman.com\/spf\/validate.html<\/a>             &#8230; Validate your SPF record<\/p>\n\n\n\n<p><a href=\"https:\/\/www.mailgenius.com\/\">https:\/\/www.mailgenius.com\/<\/a>                                 &#8230;.Check your mail server\/domain score<\/p>\n","protected":false},"excerpt":{"rendered":"<p>What even is SPF, DKIM and DMARC? SPF, DKIM and DMARC are simply a set [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":1504,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"nf_dc_page":"","om_disable_all_campaigns":false,"_mi_skip_tracking":false},"categories":[142],"tags":[514],"jetpack_featured_media_url":"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/11\/spf_dkim_dmarc.png?fit=1280%2C720&ssl=1","_links":{"self":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/1494"}],"collection":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=1494"}],"version-history":[{"count":5,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/1494\/revisions"}],"predecessor-version":[{"id":1556,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/1494\/revisions\/1556"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/media\/1504"}],"wp:attachment":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=1494"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=1494"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=1494"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}