{"id":851,"date":"2022-01-22T14:53:41","date_gmt":"2022-01-22T14:53:41","guid":{"rendered":"https:\/\/thetechcorner.org\/?p=851"},"modified":"2022-01-22T14:53:46","modified_gmt":"2022-01-22T14:53:46","slug":"interrupt-the-boot-process-in-order-to-gain-access-to-a-system","status":"publish","type":"post","link":"https:\/\/thetechcorner.org\/?p=851","title":{"rendered":"Interrupt the boot process in order to gain access to a system"},"content":{"rendered":"\n<p>I&#8217;ve already did similar tutorial on this blog about this <a href=\"https:\/\/thetechcorner.org\/?p=503\">topic<\/a>, but the CentOS is using a security tool called SELinux which Raspbian kernel doesn&#8217;t support, so we need to switch up a few steps.<\/p>\n\n\n\n<p><\/p>\n\n\n\n<h3>What is SELinux?<\/h3>\n\n\n\n<p>According to <a href=\"https:\/\/www.redhat.com\/en\/topics\/linux\/what-is-selinux\">RedHat website <\/a> SELinux is<\/p>\n\n\n\n<blockquote class=\"wp-block-quote\"><p>Security-Enhanced Linux (SELinux) is a security architecture for\u00a0<a href=\"https:\/\/www.redhat.com\/en\/topics\/linux\/what-is-linux\">Linux\u00ae systems<\/a>\u00a0that allows administrators to have more control over who can access the system. It was originally developed by the United States National Security Agency (NSA) as a series of patches to the\u00a0<a href=\"https:\/\/www.redhat.com\/en\/topics\/linux\/what-is-the-linux-kernel\">Linux kernel<\/a>\u00a0using Linux Security Modules (LSM).\u00a0\u00a0<\/p><p>SELinux was released to the open source community in 2000, and was integrated into the upstream Linux kernel in 2003.<\/p><\/blockquote>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>Which basically means that in its default enforcing mode, SELinux will deny and log any unauthorized attempts to access any resource<\/strong>. This approach, usually referred to as the principle of least privilege, means that explicit permission must be given to a user or program to access files, directories, sockets, and other services.<\/p>\n\n\n\n<p><\/p>\n\n\n\n<h3>Interapting the boot process with rd.break<\/h3>\n\n\n\n<p>The first step in interrupting the boot process would be starting or rebooting the system. <strong>You would do that by pressing e button on your keyboard (for an edit)<\/strong> in selection of the OS in GRUB menu.<\/p>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"358\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-141.png?resize=640%2C358&#038;ssl=1\" alt=\"\" class=\"wp-image-853\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-141.png?w=718&amp;ssl=1 718w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-141.png?resize=300%2C168&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-141.png?resize=24%2C13&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-141.png?resize=36%2C20&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-141.png?resize=48%2C27&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p>You should be now in the screen same as this one<\/p>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"351\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-142.png?resize=640%2C351&#038;ssl=1\" alt=\"\" class=\"wp-image-854\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-142.png?w=720&amp;ssl=1 720w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-142.png?resize=300%2C165&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-142.png?resize=24%2C13&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-142.png?resize=36%2C20&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-142.png?resize=48%2C26&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p>And now we simply <strong>type the words &#8220;rd.break<\/strong>&#8221; <strong>at the end of &#8220;Linux line&#8221;<\/strong> ( a line starting with the word Linux) to tell the boot process we want to boot into the shell menu and not into the system.<\/p>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"354\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-143.png?resize=640%2C354&#038;ssl=1\" alt=\"\" class=\"wp-image-855\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-143.png?w=725&amp;ssl=1 725w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-143.png?resize=300%2C166&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-143.png?resize=24%2C13&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-143.png?resize=36%2C20&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-143.png?resize=48%2C27&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>We can also add another line &#8220;enforcing=0&#8221;<\/strong> which will switch new temporary mode of SELinux to &#8220;<strong>Permissive state<\/strong>&#8221; in which security actions contrary to the policy are only logged into the audit log and not blocked by the system.<\/p>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"343\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-145.png?resize=640%2C343&#038;ssl=1\" alt=\"\" class=\"wp-image-857\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-145.png?w=721&amp;ssl=1 721w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-145.png?resize=300%2C161&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-145.png?resize=24%2C13&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-145.png?resize=36%2C19&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-145.png?resize=48%2C26&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p>You can find out more about SELinux modes <a href=\"https:\/\/www.thegeekdiary.com\/centos-redhat-how-to-set-selinux-modes\/\">here<\/a>.<\/p>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"439\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-144.png?resize=640%2C439&#038;ssl=1\" alt=\"\" class=\"wp-image-856\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-144.png?w=903&amp;ssl=1 903w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-144.png?resize=300%2C206&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-144.png?resize=768%2C526&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-144.png?resize=24%2C16&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-144.png?resize=36%2C25&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-144.png?resize=48%2C33&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>Adding this line is not necessary<\/strong>, as we can also enforce this by creating an empty hidden file named &#8220;.autorelabel&#8221; stored in the \/ directory. I&#8217;ll show you how to do this in one of the next steps.<\/p>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>Now simply press &#8220;ctrl+x&#8221; or  &#8220;F10&#8221;  to continue the boot process. <\/strong><\/p>\n\n\n\n<p><\/p>\n\n\n\n<p>We are now in emergency mode of Linux. It should look like this.<\/p>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"257\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-146.png?resize=640%2C257&#038;ssl=1\" alt=\"\" class=\"wp-image-858\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-146.png?w=670&amp;ssl=1 670w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-146.png?resize=300%2C120&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-146.png?resize=24%2C10&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-146.png?resize=36%2C14&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-146.png?resize=48%2C19&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p>If you would now type &#8220;passwd&#8221; to change to root password, you would be quickly greeted with the message &#8220;command not found&#8221; even after checking the syntax 5 times over.<\/p>\n\n\n\n<p>That&#8217;s because the system didn&#8217;t mount the file system with the passwd command included yet. And even if the system had the command, we could not overwrite it because the system is now read only. To change that type<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">mount -o remount, rw \/sysroot<\/pre>\n\n\n\n<pre class=\"wp-block-preformatted\">chroot \/sysroot<\/pre>\n\n\n\n<p><\/p>\n\n\n\n<p>And all we have to do now is simple change the password of root<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">passwd\n*newpassword*\n*newpassword*<\/pre>\n<\/div><\/div>\n<\/div><\/div>\n\n\n\n<p><\/p>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"467\" height=\"163\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-147.png?resize=467%2C163&#038;ssl=1\" alt=\"\" class=\"wp-image-859\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-147.png?w=467&amp;ssl=1 467w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-147.png?resize=300%2C105&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-147.png?resize=24%2C8&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-147.png?resize=36%2C13&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-147.png?resize=48%2C17&amp;ssl=1 48w\" sizes=\"(max-width: 467px) 100vw, 467px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>The next step is creating the previously mentioned &#8220;.autorelabel&#8221; file<\/strong>. You either did enforcing=0 or you create this file. You don&#8217;t have to do both, I&#8217;ll just do it for demonstration purposes. <\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">touch \/.autorelabel<\/pre>\n<\/div><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p>All we have to do now is to exit from the terminal by typing exit and the boot process should continue. You should see the relabel warning message in your terminal, but that&#8217;s ok. It&#8217;s doing that because we ask system to do it with the &#8220;.autorelabel&#8221; file. <\/p>\n\n\n\n<p>This  occurs when labeling a file system for SELinux for the first time, or when switching between different types of policy, such as changing from the targeted to the strict policy.<\/p>\n\n\n\n<figure class=\"wp-block-image size-full is-style-default\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"123\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-148.png?resize=640%2C123&#038;ssl=1\" alt=\"\" class=\"wp-image-860\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-148.png?w=806&amp;ssl=1 806w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-148.png?resize=300%2C58&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-148.png?resize=768%2C148&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-148.png?resize=24%2C5&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-148.png?resize=36%2C7&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-148.png?resize=48%2C9&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure>\n\n\n\n<p><\/p>\n\n\n\n<p>You can find out what autorelabeling (I may or may not have made up this word myself, yes) is <a href=\"https:\/\/unix.stackexchange.com\/questions\/509798\/what-does-touch-autorelabel-do-when-we-reset-the-root-password-in-red-hat-en\">here<\/a>.<\/p>\n\n\n\n<p><\/p>\n\n\n\n<p>There is one last thing we have to do, and that&#8217;s restoring the \/etc\/shadow file context, which we changed\/destroyed in our password change journey. To do this type<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">restorecon \/etc\/shadow<\/pre>\n\n\n\n<pre class=\"wp-block-preformatted\">setenforce 1<\/pre>\n<\/div><\/div>\n\n\n\n<p>And to check enforcing status type<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">getenforce <\/pre>\n<\/div><\/div>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"415\" height=\"85\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-149.png?resize=415%2C85&#038;ssl=1\" alt=\"\" class=\"wp-image-861\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-149.png?w=415&amp;ssl=1 415w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-149.png?resize=300%2C61&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-149.png?resize=24%2C5&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-149.png?resize=36%2C7&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/image-149.png?resize=48%2C10&amp;ssl=1 48w\" sizes=\"(max-width: 415px) 100vw, 415px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p>And that concludes this lesson, I hope you&#8217;ve understood my explanation and found this as interesting as I do.<\/p>\n\n\n\n<p><\/p>\n","protected":false},"excerpt":{"rendered":"<p>I&#8217;ve already did similar tutorial on this blog about this topic, but the CentOS is [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":840,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"nf_dc_page":"","om_disable_all_campaigns":false,"_mi_skip_tracking":false},"categories":[219],"tags":[327,313,330,326,331,323,322,325,328,220,329,316,324,201],"jetpack_featured_media_url":"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/01\/rhsa-operate-running-systems.png?fit=1280%2C720&ssl=1","_links":{"self":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/851"}],"collection":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=851"}],"version-history":[{"count":1,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/851\/revisions"}],"predecessor-version":[{"id":862,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/851\/revisions\/862"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/media\/840"}],"wp:attachment":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=851"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=851"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=851"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}