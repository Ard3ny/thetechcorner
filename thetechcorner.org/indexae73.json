{"id":503,"date":"2021-11-25T12:10:51","date_gmt":"2021-11-25T12:10:51","guid":{"rendered":"https:\/\/thetechcorner.org\/?p=503"},"modified":"2022-01-04T09:30:28","modified_gmt":"2022-01-04T09:30:28","slug":"how-to-recover-a-root-password-in-a-linux","status":"publish","type":"post","link":"https:\/\/thetechcorner.org\/?p=503","title":{"rendered":"How to recover a root password in a Linux"},"content":{"rendered":"\n<p>In case of losing a password of your Linux operating system, you can still recover it quite easily, as long as you have physical access to the system.<\/p>\n\n\n\n<p>There are multiple options how to do this, but I will show two most often and the special one used in the Raspbian systems.<\/p>\n\n\n\n<p><\/p>\n\n\n\n<h3>1. Reset root password from the GRUB<\/h3>\n\n\n\n<p>First, we need to get into the GRUB (bootloader that loads the Linux kernel or any other OS). To do that, we need to reboot our OS (this works with VM&#8217;s as well) and when you see Oracle&#8217;s logo, click the screen and hold down SHIFT until the Grub menu appears.<\/p>\n\n\n\n<p><\/p>\n\n\n\n<p>There is also the option to have this show with every boot. To do this you need to edit a grub file which you may not have access to so I&#8217;m just giving you this as a useful option in the future.<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>gksudo gedit \/etc\/default\/grub<\/strong><\/pre>\n<\/div><\/div>\n\n\n\n<p><strong>and add a # in front of GRUB_HIDDEN_TIMEOUT=0<\/strong><\/p>\n\n\n\n<p>And apply the settings with <\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>sudo update-grub<\/strong><\/pre>\n<\/div><\/div>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"637\" height=\"546\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image.png?resize=637%2C546&#038;ssl=1\" alt=\"\" class=\"wp-image-504\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image.png?w=637&amp;ssl=1 637w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image.png?resize=300%2C257&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image.png?resize=24%2C21&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image.png?resize=36%2C31&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image.png?resize=48%2C41&amp;ssl=1 48w\" sizes=\"(max-width: 637px) 100vw, 637px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>Choose an Advanced options for your OS and then press letter &#8216;e&#8217; on your keyboard for edit option.<\/strong><\/p>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"637\" height=\"552\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-1.png?resize=637%2C552&#038;ssl=1\" alt=\"\" class=\"wp-image-505\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-1.png?w=637&amp;ssl=1 637w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-1.png?resize=300%2C260&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-1.png?resize=24%2C21&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-1.png?resize=36%2C31&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-1.png?resize=48%2C42&amp;ssl=1 48w\" sizes=\"(max-width: 637px) 100vw, 637px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p>Now we need to rewrite some of the lines to tell the system to start with bash when system boots and to do that change system from read-only to read and write option.<\/p>\n\n\n\n<p>So we just change <strong>rd -&gt; rw<\/strong> and add <strong>init=\/bin\/bash<\/strong><\/p>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full is-resized\"><img decoding=\"async\" loading=\"lazy\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-3.png?resize=636%2C961&#038;ssl=1\" alt=\"\" class=\"wp-image-507\" width=\"636\" height=\"961\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-3.png?w=636&amp;ssl=1 636w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-3.png?resize=199%2C300&amp;ssl=1 199w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-3.png?resize=16%2C24&amp;ssl=1 16w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-3.png?resize=24%2C36&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-3.png?resize=32%2C48&amp;ssl=1 32w\" sizes=\"(max-width: 636px) 100vw, 636px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>Press F10 to boot and display a screen with a command line.<\/strong><\/p>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"125\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-4.png?resize=640%2C125&#038;ssl=1\" alt=\"\" class=\"wp-image-508\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-4.png?w=722&amp;ssl=1 722w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-4.png?resize=300%2C59&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-4.png?resize=24%2C5&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-4.png?resize=36%2C7&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-4.png?resize=48%2C9&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>Now we need to mount our root file system in read-write mode. To do that type:<\/strong><\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>mount -n -o remount, rw \/<\/strong><\/pre>\n<\/div><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>And we are free to change a password:<\/strong><\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>passwd root<\/strong><\/pre>\n\n\n\n<p><em>Take a note, you can do this for any user account on this OS, not only root<\/em><\/p>\n<\/div><\/div>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"129\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-5.png?resize=640%2C129&#038;ssl=1\" alt=\"\" class=\"wp-image-509\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-5.png?w=719&amp;ssl=1 719w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-5.png?resize=300%2C61&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-5.png?resize=24%2C5&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-5.png?resize=36%2C7&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-5.png?resize=48%2C10&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>To finish and reboot a system type:<\/strong><\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>exec \/sbin\/init<\/strong><\/pre>\n<\/div><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><\/p>\n\n\n\n<p><\/p>\n\n\n\n<h3>Reset root password with live CD<\/h3>\n\n\n\n<p>Another very popular option is to use live CD or USB, if you don&#8217;t have one simply download for example <strong><a href=\"https:\/\/ubuntu.com\/download\/desktop\">Ubuntu<\/a><\/strong> and burn in onto USB using Rufus or any other 3rd party app.<\/p>\n\n\n\n<ol><li>In the first step simply put USB into a PC.<\/li><li>Start PC and wait for a screen with two options, <strong>Try Ubuntu<\/strong> and<strong> Install Ubuntu<\/strong>. (<em>note that you&#8217;ll maybe need to change a settings in BIOS to boot into live CD successfully)<\/em> and pick the <strong>Try Ubuntu<\/strong> option.<\/li><\/ol>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"463\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-6.png?resize=640%2C463&#038;ssl=1\" alt=\"\" class=\"wp-image-511\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-6.png?w=790&amp;ssl=1 790w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-6.png?resize=300%2C217&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-6.png?resize=768%2C555&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-6.png?resize=24%2C17&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-6.png?resize=36%2C26&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-6.png?resize=48%2C35&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><strong>3. <\/strong>Open a terminal and <strong>type following commands.<\/strong> This makes us a <strong>root<\/strong> user and will <strong>list disk <\/strong>partions:<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>sudo su <\/strong>\n<strong>fdisk -l<\/strong><\/pre>\n\n\n\n<figure class=\"wp-block-image size-full is-style-default\"><img decoding=\"async\" loading=\"lazy\" width=\"558\" height=\"100\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-7.png?resize=558%2C100&#038;ssl=1\" alt=\"\" class=\"wp-image-512\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-7.png?w=558&amp;ssl=1 558w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-7.png?resize=300%2C54&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-7.png?resize=24%2C4&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-7.png?resize=36%2C6&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/image-7.png?resize=48%2C9&amp;ssl=1 48w\" sizes=\"(max-width: 558px) 100vw, 558px\" data-recalc-dims=\"1\" \/><\/figure>\n\n\n\n<p><\/p>\n<\/div><\/div>\n\n\n\n<p>We are looking for a system partition, which in <strong>MY CASE<\/strong> is \/dev\/sd5 and is type Linux. <strong>This may differ in your case.<\/strong><\/p>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>4. Now we need to mount this system to a folder which we will create:<\/strong><\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>mkdir \/mnt\/recover<\/strong>y<\/pre>\n<\/div><\/div>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>mount \/dev\/sda1 \/mnt\/recover<\/strong>y<\/pre>\n<\/div><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>5. <\/strong>In this step <strong>we need to trick the system<\/strong> into thinking we are using regular Linux file system. To do this we will &#8220;<strong>jail ourself<\/strong>&#8221; or technically speaking &#8220;<strong>chroot ourself<\/strong>&#8221; into this directory.<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>chroot \/mnt\/recover<\/strong>y<\/pre>\n<\/div><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p><strong>5. System now thinks we are root in regular Linux session and we can easily change the password of root or any user like in previous case with the GRUB method<\/strong><\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>passwd root<\/strong><\/pre>\n\n\n\n<pre class=\"wp-block-preformatted\"><strong>exit<\/strong><\/pre>\n\n\n\n<pre class=\"wp-block-preformatted\"><strong>umount \/mnt\/recovery<\/strong><\/pre>\n\n\n\n<p><strong>6. <\/strong>Remove live CD or USB and reboot the system<\/p>\n\n\n\n<p><\/p>\n\n\n\n<p><\/p>\n<\/div><\/div>\n\n\n\n<h3>Reset root password in a Raspbian <\/h3>\n\n\n\n<p>This method is rather different from all the others so I decided to put this here as well.<\/p>\n\n\n\n<ol><li>First you need to <strong>extract the SD card from your Raspberry PI<\/strong> and put it into your other PC with card reader.<\/li><li><strong>Open <\/strong>the SD card and <strong>edit <\/strong>the <strong>cmdline.txt <\/strong>file. <\/li><li>You will see line like this<\/li><\/ol>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>dwc_otg.lpm_enable=0 console=ttyAMA0,115200 console=tty1 root=\/dev\/mmcblk0p2 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait<\/strong><\/pre>\n<\/div><\/div>\n\n\n\n<p>And you simply <strong>add the line bellow to the end of the line above.<\/strong> Note this line <strong>MUST BE<\/strong> on the same line.<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>init=\/bin\/sh<\/strong><\/pre>\n<\/div><\/div>\n\n\n\n<p>4. Now put the SD card again to the Raspberry PI and boot it. The rest of this tutorial is the same as the first example with the GRUB so I&#8217;ll just speed run this<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\"><strong>mount -o remount, rw \/<\/strong><\/pre>\n\n\n\n<pre class=\"wp-block-preformatted\"><strong>password pi<\/strong><\/pre>\n\n\n\n<pre class=\"wp-block-preformatted\"><strong>sync<\/strong><\/pre>\n\n\n\n<pre class=\"wp-block-preformatted\"><strong>exec \/sbin\/init<\/strong><\/pre>\n\n\n\n<p><\/p>\n\n\n\n<p><\/p>\n<\/div><\/div>\n","protected":false},"excerpt":{"rendered":"<p>In case of losing a password of your Linux operating system, you can still recover [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":517,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"nf_dc_page":"","om_disable_all_campaigns":false,"_mi_skip_tracking":false},"categories":[208],"tags":[108,110,112,209,210],"jetpack_featured_media_url":"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2021\/11\/linux-essentials.png?fit=1280%2C720&ssl=1","_links":{"self":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/503"}],"collection":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=503"}],"version-history":[{"count":4,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/503\/revisions"}],"predecessor-version":[{"id":655,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/503\/revisions\/655"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/media\/517"}],"wp:attachment":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=503"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=503"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=503"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}