{"id":1430,"date":"2022-03-19T16:49:00","date_gmt":"2022-03-19T16:49:00","guid":{"rendered":"https:\/\/thetechcorner.org\/?p=1430"},"modified":"2022-03-16T12:00:59","modified_gmt":"2022-03-16T12:00:59","slug":"attach-persistent-storage-to-a-container","status":"publish","type":"post","link":"https:\/\/thetechcorner.org\/?p=1430","title":{"rendered":"Attach persistent storage to a container"},"content":{"rendered":"\n<p>As you may or may not know, whenever you stop the container, all the data from the running session are going to be deleted. This would be very impractical with almost every use case of using containers, so to bypass this, we attach external storage outside the container.<\/p>\n\n\n\n<p>First let&#8217;s create a folder outside of the container which we will later attach to the container<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">mkdir httpd<\/pre>\n<\/div><\/div>\n\n\n\n<p>And now create a testfile which will tell us if the storage is attached and if it&#8217;s get erased after stopping the container<\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">echo \"<strong>Hello There<\/strong>. General Kenobi!\" > httpd\/test.txt<\/pre>\n<\/div><\/div>\n\n\n\n<p><\/p>\n\n\n\n<p>And the last step in this process is attaching this folder to the container with <em>podman run<\/em> command. We do this by adding a new flag -v<\/p>\n\n\n\n<blockquote class=\"wp-block-quote\"><p>&#8211;<strong>v<\/strong>: or volume is a flag that creates a bind mount. If you specify\u00a0<em>\/HOST-DIR<\/em>:<em>\/CONTAINER-DIR<\/em>, Podman bind mounts\u00a0<em>host-dir<\/em>\u00a0in the host to\u00a0<em>CONTAINER-DIR<\/em>\u00a0in the Podman container. Similarly,\u00a0<em>SOURCE-VOLUME<\/em>:<em>\/CONTAINER-DIR<\/em>\u00a0will mount the volume in the host to the container. If no such named volume exists, Podman will create one.<\/p><\/blockquote>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">podman run --name httpd_server -dit -p 7002:8080 -v ~\/httpd:\/var\/www\/html:z registry.access.redhat.com\/rhscl\/httpd-24-rhel <\/pre>\n<\/div><\/div>\n\n\n\n<figure class=\"wp-block-image size-large is-style-default\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"113\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-56.png?resize=640%2C113&#038;ssl=1\" alt=\"\" class=\"wp-image-1452\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-56.png?resize=1024%2C181&amp;ssl=1 1024w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-56.png?resize=300%2C53&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-56.png?resize=768%2C136&amp;ssl=1 768w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-56.png?resize=24%2C4&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-56.png?resize=36%2C6&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-56.png?resize=48%2C8&amp;ssl=1 48w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-56.png?w=1150&amp;ssl=1 1150w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure>\n\n\n\n<p><\/p>\n\n\n\n<p>And let&#8217;s check if the file is attached <\/p>\n\n\n\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<pre class=\"wp-block-preformatted\">curl http:\/\/localhost:7002\/test.txt<\/pre>\n<\/div><\/div>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"54\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-57.png?resize=640%2C54&#038;ssl=1\" alt=\"\" class=\"wp-image-1453\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-57.png?w=678&amp;ssl=1 678w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-57.png?resize=300%2C25&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-57.png?resize=24%2C2&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-57.png?resize=36%2C3&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-57.png?resize=48%2C4&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<div class=\"wp-block-image is-style-default\"><figure class=\"aligncenter size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"157\" src=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-58.png?resize=640%2C157&#038;ssl=1\" alt=\"\" class=\"wp-image-1454\" srcset=\"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-58.png?w=695&amp;ssl=1 695w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-58.png?resize=300%2C73&amp;ssl=1 300w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-58.png?resize=24%2C6&amp;ssl=1 24w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-58.png?resize=36%2C9&amp;ssl=1 36w, https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/image-58.png?resize=48%2C12&amp;ssl=1 48w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/figure><\/div>\n\n\n\n<p><\/p>\n\n\n\n<blockquote class=\"wp-block-quote\"><p>And finally we&#8217;ve come to the end of this series. Well, I would say, at least the main part of it. Even tho I&#8217;ve covered all the posts from RHCSA 8 series, I still plan on working some study materials and test labs, so tuned again!<\/p><\/blockquote>\n\n\n\n<p><\/p>\n","protected":false},"excerpt":{"rendered":"<p>As you may or may not know, whenever you stop the container, all the data [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":1401,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"nf_dc_page":"","om_disable_all_campaigns":false,"_mi_skip_tracking":false},"categories":[219],"tags":[503,504,220,405],"jetpack_featured_media_url":"https:\/\/i0.wp.com\/thetechcorner.org\/wp-content\/uploads\/2022\/03\/rhsa-Manage-containers.png?fit=1280%2C720&ssl=1","_links":{"self":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/1430"}],"collection":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=1430"}],"version-history":[{"count":1,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/1430\/revisions"}],"predecessor-version":[{"id":1455,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/posts\/1430\/revisions\/1455"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=\/wp\/v2\/media\/1401"}],"wp:attachment":[{"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=1430"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=1430"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/thetechcorner.org\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=1430"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}